name: "modbus_reader"
arch: "all"
platform: "linux"
version: "${VERSION}"
section: "utils"
priority: "optional"
maintainer: "Christoph Souris <christoph.souris@csou.de"
description: Generic Modbus to MQTT reader
license: Apache License 2.0
homepage: "https://github.com/you/myapp"

depends:
  - python3
  - python3-paho-mqtt

contents:
  - src: ./modbus_reader/*
    dst: /usr/lib/python3/dist-packages/modbus_reader
  - src: ./packaging/modbus-reader.service
    dst: /lib/systemd/system/modbus-reader.service
    file_info:
      mode: 0644
      owner: root
  - dst: /var/log/modbus_reader
    type: dir
  - src: config/*
    dst: /etc/modbus_reader/
    type: config|noreplace
    file_info:
      owner: root
      group: root
      mode: 0644

scripts:
  postinstall: packaging/postinst.sh
  preremove: packaging/prerm.sh
